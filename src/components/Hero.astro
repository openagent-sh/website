---
import { ArrowRight, Star } from "@lucide/astro";
---

<section class="relative pt-32 pb-20 md:pt-40 md:pb-28 overflow-hidden">
  <!-- Decorative circuit lines -->
  <div class="absolute inset-0 pointer-events-none">
    <svg class="absolute top-20 left-0 w-full h-40 opacity-40" viewBox="0 0 1200 160" preserveAspectRatio="none">
      <path class="circuit-line" d="M0 80 H400 Q420 80 420 100 V120 Q420 140 440 140 H600" />
      <circle class="circuit-node" cx="400" cy="80" r="3" />
      <circle class="circuit-node" cx="440" cy="140" r="3" />
      <circle class="circuit-node-accent" cx="600" cy="140" r="4" />

      <path class="circuit-line" d="M1200 60 H900 Q880 60 880 80 V100" />
      <circle class="circuit-node" cx="900" cy="60" r="3" />
      <circle class="circuit-node-accent" cx="880" cy="100" r="4" />
    </svg>
  </div>

  <div class="mx-auto max-w-6xl px-6 relative">
    <div class="flex flex-col items-center text-center">
      <!-- Badge -->
      <div class="mb-8 animate-fade-in-up" style="opacity: 0;">
        <span class="inline-flex items-center gap-2 rounded-full border border-[var(--border)] bg-[var(--surface)] px-4 py-1.5 text-xs font-medium text-[var(--text-muted)]">
          <span class="w-1.5 h-1.5 rounded-full bg-[var(--accent)] animate-pulse-glow"></span>
          Launching 02.01.2026
        </span>
      </div>

      <!-- Headline -->
      <h1 class="text-4xl font-bold tracking-tight md:text-5xl lg:text-6xl animate-fade-in-up delay-100 uppercase" style="opacity: 0;">
        <span class="text-[var(--text-faded)]">Your </span>
        <span class="text-[var(--text-primary)]">Cofounder</span>
        <span class="text-[var(--text-faded)]"> for </span>
        <span class="text-[var(--accent)]">Life</span>
      </h1>

      <!-- Subheadline -->
      <p class="mt-6 max-w-2xl text-base text-[var(--text-muted)] md:text-lg animate-fade-in-up delay-200" style="opacity: 0;">
        A personal AI operating system that remembers, adapts, and grows with you.
      </p>

      <!-- CTAs -->
      <div class="mt-10 flex flex-col gap-4 sm:flex-row sm:gap-4 animate-fade-in-up delay-300" style="opacity: 0;">
        <a
          href="#install"
          class="group relative inline-flex items-center justify-center gap-2 px-8 py-3.5 text-sm font-medium border border-[var(--accent)] bg-[var(--accent)] text-white hover:bg-[var(--accent-muted)] transition-all"
        >
          <!-- Corner brackets -->
          <span class="absolute top-0 left-0 w-3 h-3 border-t-2 border-l-2 border-white/50"></span>
          <span class="absolute top-0 right-0 w-3 h-3 border-t-2 border-r-2 border-white/50"></span>
          <span class="absolute bottom-0 left-0 w-3 h-3 border-b-2 border-l-2 border-white/50"></span>
          <span class="absolute bottom-0 right-0 w-3 h-3 border-b-2 border-r-2 border-white/50"></span>
          <span>Get Started</span>
          <ArrowRight class="h-4 w-4 transition-transform group-hover:translate-x-0.5" />
        </a>
        <a
          href="https://github.com/openagent-sh/openagent"
          target="_blank"
          rel="noopener noreferrer"
          class="group relative inline-flex items-center justify-center gap-2 px-6 py-3.5 text-sm font-medium border border-[var(--accent)]/30 bg-[var(--surface)]/50 text-[var(--text-primary)] hover:border-[var(--accent)]/60 hover:bg-[var(--surface)] transition-all"
        >
          <!-- Corner brackets -->
          <span class="absolute top-0 left-0 w-3 h-3 border-t-2 border-l-2 border-[var(--accent)]/50 group-hover:border-[var(--accent)] transition-colors"></span>
          <span class="absolute top-0 right-0 w-3 h-3 border-t-2 border-r-2 border-[var(--accent)]/50 group-hover:border-[var(--accent)] transition-colors"></span>
          <span class="absolute bottom-0 left-0 w-3 h-3 border-b-2 border-l-2 border-[var(--accent)]/50 group-hover:border-[var(--accent)] transition-colors"></span>
          <span class="absolute bottom-0 right-0 w-3 h-3 border-b-2 border-r-2 border-[var(--accent)]/50 group-hover:border-[var(--accent)] transition-colors"></span>
          <Star class="h-4 w-4" />
          <span>Star on GitHub</span>
          <span id="github-stars" class="text-[var(--accent)] font-medium tabular-nums"></span>
        </a>
      </div>

      <!-- Terminal Demo -->
      <div class="mt-16 w-full max-w-4xl animate-fade-in-up delay-400" style="opacity: 0;">
        <div class="relative">
          <!-- Glow effect behind terminal -->
          <div class="absolute -inset-1 bg-gradient-to-b from-[var(--accent-glow)] to-transparent rounded-xl opacity-50 blur-xl"></div>

          <div class="relative overflow-hidden rounded-lg border border-[var(--border)] bg-[var(--surface)]">
            <!-- Terminal header -->
            <div class="border-b border-[var(--border)]">
              <div class="flex items-center gap-2 px-4 py-3">
                <span class="text-xs text-[var(--text-faded)]">openagent</span>
                <span class="ml-auto text-[var(--accent)]">●</span>
              </div>
              <!-- Tabs -->
              <div class="flex border-t border-[var(--border)]">
                <button
                  class="terminal-tab flex-1 px-4 py-2 text-xs font-medium text-[var(--text-muted)] border-r border-[var(--border)] hover:bg-[var(--background)] transition-colors data-[active=true]:bg-[var(--background)] data-[active=true]:text-[var(--text-primary)] data-[active=true]:border-b-2 data-[active=true]:border-b-[var(--accent)]"
                  data-tab="overview"
                  data-active="true"
                >
                  Overview
                </button>
                <button
                  class="terminal-tab flex-1 px-4 py-2 text-xs font-medium text-[var(--text-muted)] border-r border-[var(--border)] hover:bg-[var(--background)] transition-colors data-[active=true]:bg-[var(--background)] data-[active=true]:text-[var(--text-primary)] data-[active=true]:border-b-2 data-[active=true]:border-b-[var(--accent)]"
                  data-tab="why"
                >
                  Why?
                </button>
                <button
                  class="terminal-tab flex-1 px-4 py-2 text-xs font-medium text-[var(--text-muted)] border-r border-[var(--border)] hover:bg-[var(--background)] transition-colors data-[active=true]:bg-[var(--background)] data-[active=true]:text-[var(--text-primary)] data-[active=true]:border-b-2 data-[active=true]:border-b-[var(--accent)]"
                  data-tab="how"
                >
                  How?
                </button>
                <button
                  class="terminal-tab flex-1 px-4 py-2 text-xs font-medium text-[var(--text-muted)] border-r border-[var(--border)] hover:bg-[var(--background)] transition-colors data-[active=true]:bg-[var(--background)] data-[active=true]:text-[var(--text-primary)] data-[active=true]:border-b-2 data-[active=true]:border-b-[var(--accent)]"
                  data-tab="agents"
                >
                  Agents
                </button>
                <button
                  class="terminal-tab flex-1 px-4 py-2 text-xs font-medium text-[var(--text-muted)] hover:bg-[var(--background)] transition-colors data-[active=true]:bg-[var(--background)] data-[active=true]:text-[var(--text-primary)] data-[active=true]:border-b-2 data-[active=true]:border-b-[var(--accent)]"
                  data-tab="onboarding"
                >
                  Onboarding
                </button>
              </div>
            </div>

            <!-- Terminal content -->
            <div class="p-6 text-left text-sm min-h-[200px]">
              <div class="terminal-content" data-content="overview">
                <div class="space-y-3">
                  <div class="text-[var(--text-muted)]">
                    <p class="text-[var(--text-primary)] font-medium">OpenAgent v1.0</p>
                    <p class="mt-2">Your personal AI operating system.</p>
                    <p>Lives on your machine, remembers everything,</p>
                    <p>grows with you over time.</p>
                    <div class="mt-4 grid grid-cols-2 gap-3 max-w-md">
                      <div class="flex items-center gap-2">
                        <span class="w-1 h-1 rounded-full bg-[var(--accent)]"></span>
                        <span class="text-xs">Knows who you are</span>
                      </div>
                      <div class="flex items-center gap-2">
                        <span class="w-1 h-1 rounded-full bg-[var(--accent)]"></span>
                        <span class="text-xs">Remembers context</span>
                      </div>
                      <div class="flex items-center gap-2">
                        <span class="w-1 h-1 rounded-full bg-[var(--accent)]"></span>
                        <span class="text-xs">Tracks your goals</span>
                      </div>
                      <div class="flex items-center gap-2">
                        <span class="w-1 h-1 rounded-full bg-[var(--accent)]"></span>
                        <span class="text-xs">Spawns agents</span>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <div class="terminal-content hidden" data-content="why">
                <div class="space-y-3">
                  <div class="text-[var(--text-muted)]">
                    <p class="text-[var(--text-primary)] font-medium">The Problem</p>
                    <p class="mt-2">Every AI conversation starts from zero.</p>
                    <p>Your context, preferences, history—gone.</p>
                    <p class="mt-3">You constantly re-explain yourself to</p>
                    <p>tools that should already know you.</p>
                    <p class="mt-3 border-l-2 border-[var(--accent)] pl-3 italic text-[var(--text-faded)]">
                      "AI forgets you the moment you close the tab."
                    </p>
                  </div>
                </div>
              </div>

              <div class="terminal-content hidden" data-content="how">
                <div class="space-y-3">
                  <div class="text-[var(--text-muted)]">
                    <p class="text-[var(--text-primary)] font-medium">How It Works</p>
                    <p class="mt-2"><span class="text-[var(--accent)]">1.</span> <span class="text-[var(--text-primary)]">Onboarding</span> — 5 min to understand who you are</p>
                    <p class="mt-1"><span class="text-[var(--accent)]">2.</span> <span class="text-[var(--text-primary)]">Memory</span> — Short-term + long-term context</p>
                    <p class="mt-1"><span class="text-[var(--accent)]">3.</span> <span class="text-[var(--text-primary)]">Modular</span> — Configure agents, tasks, habits</p>
                    <p class="mt-1"><span class="text-[var(--accent)]">4.</span> <span class="text-[var(--text-primary)]">Self-improving</span> — Learns your style over time</p>
                    <p class="mt-3 text-[var(--text-faded)] text-xs">Everything stays local. Your data never leaves.</p>
                  </div>
                </div>
              </div>

              <div class="terminal-content hidden" data-content="agents">
                <div class="space-y-3">
                  <div class="text-[var(--text-muted)]">
                    <p class="text-[var(--text-primary)] font-medium">Available Agents</p>
                    <p class="mt-2">Spawn specialized agents for any task:</p>
                    <div class="mt-3 grid grid-cols-2 gap-2 text-xs">
                      <div class="rounded bg-[var(--background)] border border-[var(--border)] px-2 py-1.5 text-[var(--text-primary)] hover:border-[var(--accent)] transition-colors">/research</div>
                      <div class="rounded bg-[var(--background)] border border-[var(--border)] px-2 py-1.5 text-[var(--text-primary)] hover:border-[var(--accent)] transition-colors">/memory</div>
                      <div class="rounded bg-[var(--background)] border border-[var(--border)] px-2 py-1.5 text-[var(--text-primary)] hover:border-[var(--accent)] transition-colors">/opencode</div>
                      <div class="rounded bg-[var(--background)] border border-[var(--border)] px-2 py-1.5 text-[var(--text-primary)] hover:border-[var(--accent)] transition-colors">/product-owner</div>
                      <div class="rounded bg-[var(--background)] border border-[var(--border)] px-2 py-1.5 text-[var(--text-primary)] hover:border-[var(--accent)] transition-colors">/classical</div>
                      <div class="rounded bg-[var(--background)] border border-[var(--border)] px-2 py-1.5 text-[var(--text-primary)] hover:border-[var(--accent)] transition-colors">/frontend-designer</div>
                    </div>
                  </div>
                </div>
              </div>

              <div class="terminal-content hidden" data-content="onboarding">
                <div class="space-y-3">
                  <div class="text-[var(--text-muted)]">
                    <p class="text-[var(--text-primary)] font-medium">/onboarding</p>
                    <p class="mt-2">I'll ask you a few questions:</p>
                    <ul class="mt-2 space-y-1 text-xs">
                      <li class="flex items-center gap-2"><span class="text-[var(--accent)]">→</span> What's your name?</li>
                      <li class="flex items-center gap-2"><span class="text-[var(--accent)]">→</span> What are your work areas?</li>
                      <li class="flex items-center gap-2"><span class="text-[var(--accent)]">→</span> What are you currently working on?</li>
                      <li class="flex items-center gap-2"><span class="text-[var(--accent)]">→</span> What do you want to achieve?</li>
                      <li class="flex items-center gap-2"><span class="text-[var(--accent)]">→</span> Which agents do you need?</li>
                    </ul>
                    <p class="mt-3 text-[var(--text-faded)] text-xs">Everything is skippable. ~5 minutes.</p>
                  </div>
                </div>
              </div>

              <!-- Cursor line -->
              <div class="flex items-center pt-4 border-t border-[var(--border)] mt-4">
                <span class="text-[var(--accent)]">$</span>
                <span class="ml-2 h-4 w-2 bg-[var(--text-primary)]" style="animation: blink 1s step-end infinite;"></span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<script>
  const tabs = document.querySelectorAll('.terminal-tab');
  const contents = document.querySelectorAll('.terminal-content');

  tabs.forEach(tab => {
    tab.addEventListener('click', () => {
      const targetTab = tab.getAttribute('data-tab');

      tabs.forEach(t => {
        t.setAttribute('data-active', 'false');
      });
      tab.setAttribute('data-active', 'true');

      contents.forEach(content => {
        content.classList.add('hidden');
        if (content.getAttribute('data-content') === targetTab) {
          content.classList.remove('hidden');
        }
      });
    });
  });

  async function fetchStars() {
    try {
      const response = await fetch('https://api.github.com/repos/openagent-sh/openagent');
      if (response.ok) {
        const data = await response.json();
        const starsEl = document.getElementById('github-stars');
        if (starsEl && data.stargazers_count) {
          starsEl.textContent = data.stargazers_count.toLocaleString();
        }
      }
    } catch (e) {}
  }
  fetchStars();
</script>
