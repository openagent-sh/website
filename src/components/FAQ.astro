---
import { Plus, Minus } from "@lucide/astro";

const faqs = [
  {
    question: "What is OpenAgent?",
    answer: "OpenAgent is a personal AI operating system built on OpenCode. It's a configuration layer that adds persistent memory, specialized agents, and deep personalization to your AI workflow."
  },
  {
    question: "How is this different from OpenClaw/Clawdbot?",
    answer: "OpenAgent ships lean by default. we dont support 20.000 apps that you won't use and the focus is on building a modular but personalized agent system for you"
  },
  {
    question: "Do I need OpenCode?",
    answer: "Yes. OpenAgent is built on top of OpenCode. Install OpenCode first, then add OpenAgent as your personalization layer."
  },
  {
    question: "What if i use Claude Code, Droid etc?",
    answer: "Ofcourse we want to support all CLI's, but we had to ship something first. You can probably just ask an AI agent to move it over to your CLI/TUI config. Feel free to open a PR for official support though!"
  },
  {
    question: "Is it free?",
    answer: "Yes. OpenAgent is completely free and open source. Use it, modify it, contribute to it."
  },
  {
    question: "How do I contribute?",
    answer: "Check out our GitHub repository and the contributing guide. We welcome all contributions: code, docs, ideas."
  },
  {
    question: "What other features are planned?",
    answer: `<ul class="list-disc pl-5 space-y-2">
      <li>A custom webapp with an Agent orchestrator/kanban view, a clean dashboard and an markdown editor for your notes & documents</li>
      <li>More subagents, automations, commands and scripts that are actually useful</li>
      <li>A smarter memory layer</li>
      <li>Browser automation capabilities</li>
      <li>macOS notifications & reminders integration</li>
    </ul>`
  }
];
---

<section class="relative py-20 md:py-28">
  <!-- Subtle gradient background -->
  <div class="absolute inset-0 bg-gradient-to-b from-[var(--background)] via-[#0c0c0c] to-[var(--background)]"></div>

  <div class="relative mx-auto max-w-3xl px-6">
    <!-- Header -->
    <p class="section-label">
      FAQ
    </p>
    <h2 class="mt-4 text-2xl font-semibold text-[var(--text-primary)]">
      Frequently asked questions
    </h2>

    <!-- Questions -->
    <div class="mt-10 space-y-2">
      {faqs.map(({ question, answer }, index) => (
        <div class="faq-item border-b border-[var(--border)]">
          <button
            class="faq-trigger flex w-full items-center gap-4 py-4 text-left group"
            aria-expanded="false"
            data-index={index}
          >
            <span class="faq-icon flex-shrink-0 text-[var(--text-muted)] group-hover:text-[var(--accent)] transition-colors">
              <Plus class="h-4 w-4" />
            </span>
            <span class="text-[var(--text-primary)] font-medium group-hover:text-[var(--accent)] transition-colors">{question}</span>
          </button>
          <div class="faq-content hidden pl-8 pb-4">
            <div class="text-sm text-[var(--text-muted)] leading-relaxed" set:html={answer}></div>
          </div>
        </div>
      ))}
    </div>
  </div>
</section>

<script>
  const faqItems = document.querySelectorAll('.faq-item');

  faqItems.forEach(item => {
    const trigger = item.querySelector('.faq-trigger');
    const content = item.querySelector('.faq-content');
    const icon = item.querySelector('.faq-icon');

    trigger?.addEventListener('click', () => {
      const isOpen = trigger.getAttribute('aria-expanded') === 'true';

      // Toggle current item
      trigger.setAttribute('aria-expanded', isOpen ? 'false' : 'true');
      content?.classList.toggle('hidden', isOpen);

      // Swap icon - Plus when closed, Minus when open
      if (icon) {
        icon.innerHTML = isOpen
          ? '<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M5 12h14"/><path d="M12 5v14"/></svg>'
          : '<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M5 12h14"/></svg>';
      }
    });
  });
</script>
